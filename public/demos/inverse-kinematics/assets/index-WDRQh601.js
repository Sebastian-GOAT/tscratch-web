(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function s(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerPolicy&&(n.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?n.credentials="include":h.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(h){if(h.ep)return;h.ep=!0;const n=s(h);fetch(h.href,n)}})();var i=document.getElementById("game-window"),l=i.getContext("2d"),f=document.createElement("canvas"),o=f.getContext("2d");f.id="pen-canvas";var y=16/9,c;function x(t){c=t,i.width=y*c,i.height=c,f.width=y*c,f.height=c}i.parentElement?.insertBefore(f,i);x(500);var p=class{x;y;dir;refresh(){m.init().refresh()}constructor(t){this.x=t?.x??0,this.y=t?.y??0,this.dir=t?.dir??0,m.init().addSprites(this)}toRadians(t){return t*Math.PI/180}toDegrees(t){return t*180/Math.PI}move(t){this.x+=t*Math.sin(this.toRadians(this.dir)),this.y+=t*Math.cos(this.toRadians(this.dir)),this.refresh()}turn(t){this.dir+=t,this.refresh()}point(t){this.dir=t,this.refresh()}setX(t){this.x=t,this.refresh()}setY(t){this.y=t,this.refresh()}goTo(t,e){this.x=t,this.y=e,this.refresh()}changeX(t){this.x+=t,this.refresh()}changeY(t){this.y+=t,this.refresh()}},m=class w{static instance;updateInterval;loop=()=>{};maxFPS=24;mouseX=0;mouseY=0;sprites=[];static init(){return this.instance||(this.instance=new w),this.instance}addSprites(...e){this.sprites.push(...e)}removeSprites(...e){this.sprites=this.sprites.filter(s=>!e.includes(s))}setMaxFramesPerSecond(e){this.maxFPS=e,clearInterval(this.updateInterval),this.updateInterval=setInterval(()=>this.loop(),1e3/this.maxFPS)}refresh(){l.clearRect(0,0,i.width,i.height),this.sprites.forEach(e=>e.draw())}async wait(e){return new Promise(s=>setTimeout(s,e))}toRadians(e){return e*Math.PI/180}toDegrees(e){return e*180/Math.PI}constructor(){this.setMaxFramesPerSecond(24),i.addEventListener("mousemove",e=>{this.mouseX=e.clientX-i.offsetLeft-i.width/2,this.mouseY=-(e.clientY-i.offsetTop-i.height/2)})}},v=class extends p{drawing;size;color;draw(){}up(){this.drawing=!1}down(){this.drawing=!0}ereaseAll(){o.clearRect(0,0,i.width,i.height)}dot(){o.fillStyle=this.color,o.fillRect(this.x-this.size/2+i.width/2,-this.y-this.size/2+i.height/2,this.size,this.size)}drawLine(t,e){o.beginPath(),o.moveTo(t+i.width/2,-e+i.height/2),o.lineTo(this.x+i.width/2,-this.y+i.height/2),o.lineWidth=this.size,o.strokeStyle=this.color,o.stroke()}move(t){let e=this.x,s=this.y;this.x+=t*Math.sin(this.toRadians(this.dir)),this.y+=t*Math.cos(this.toRadians(this.dir)),this.drawing&&this.drawLine(e,s),this.refresh()}setX(t){let e=this.x,s=this.y;this.x=t,this.drawing&&this.drawLine(e,s),this.refresh()}setY(t){let e=this.x,s=this.y;this.y=t,this.drawing&&this.drawLine(e,s),this.refresh()}goTo(t,e){let s=this.x,a=this.y;this.x=t,this.y=e,this.drawing&&this.drawLine(s,a),this.refresh()}changeX(t){let e=this.x,s=this.y;this.x+=t,this.drawing&&this.drawLine(e,s),this.refresh()}changeY(t){let e=this.x,s=this.y;this.y+=t,this.drawing&&this.drawLine(e,s),this.refresh()}constructor(t){super(t),this.drawing=t?.drawing??!1,this.size=t?.size??5,this.color=t?.color??"black"}},S=class extends p{content;color;fontFamily;fontSize;align;baseline;font;draw(){l.font=this.font,l.fillStyle=this.color,l.textAlign=this.align,l.textBaseline=this.baseline,l.fillText(this.content,this.x+i.width/2,this.y+i.height/2)}setContent(t){this.content=t,this.refresh()}setColor(t){this.color=t,this.refresh()}setFontSize(t){this.fontSize=t,this.refresh()}setFontFamily(t){this.fontFamily=t,this.refresh()}setAlign(t){this.align=t,this.refresh()}setBaseline(t){this.baseline=t,this.refresh()}constructor(t){super(t),this.content=t?.content??"",this.color=t?.color??"black",this.fontFamily=t?.fontFamily??"Arial",this.fontSize=t?.fontSize??16,this.align=t?.align??"center",this.baseline=t?.baseline??"middle",this.font=`${this.fontSize}px ${this.fontFamily}`}};const d=m.init();d.setMaxFramesPerSecond(60);const r=new v({size:5,color:"100"}),u=120;new S({content:"Made with TScratch",x:-i.width/2+5,y:-i.height/2+5,align:"left",baseline:"top"});d.loop=()=>{const{mouseX:t,mouseY:e}=d;if(r.ereaseAll(),r.goTo(0,0),r.point(d.toDegrees(Math.atan2(-e-r.y,t-r.x))+90),Math.hypot(t,e)<2*u)r.goTo(t,e);else{r.down(),r.move(2*u),r.up();return}r.turn(180);const s=Math.hypot(r.x,r.y),a=d.toDegrees(Math.acos(s/(2*u)));r.turn(a),r.down(),r.move(u),r.goTo(0,0),r.up()};
